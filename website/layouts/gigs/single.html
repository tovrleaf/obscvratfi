{{ define "main" }}
<article class="gig">
    <h1>{{ .Params.venue }}</h1>
    <div class="gig-details">
         <p><strong>Date:</strong> {{ .Date | dateFormat "Monday, January 2, 2006" }}</p>
        <p><strong>Venue:</strong> {{ .Params.venue }}</p>
        <p><strong>Location:</strong> {{ .Params.location }}</p>
        {{ if .Params.time }}<p><strong>Time:</strong> {{ .Params.time }}</p>{{ end }}
        {{ if .Params.other_performers }}<p><strong>Also performing:</strong> {{ delimit .Params.other_performers ", " }}</p>{{ end }}
        {{ if .Params.ticket_link }}<p><a href="{{ .Params.ticket_link }}" target="_blank">Get Tickets</a></p>{{ end }}
    </div>
    
    {{ if .Params.youtube }}
    <div class="gig-video">
        <h2>Performance Video</h2>
        {{ $url := .Params.youtube }}
        {{ if strings.Contains $url "youtube.com" }}
            {{ $vid := (strings.Split $url "v=") | last | (strings.Split "?") | first }}
            <iframe width="100%" height="400" src="https://www.youtube.com/embed/{{ $vid }}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        {{ else if strings.Contains $url "youtu.be" }}
            {{ $vid := (strings.Split $url "youtu.be/") | last | (strings.Split "?") | first }}
            <iframe width="100%" height="400" src="https://www.youtube.com/embed/{{ $vid }}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        {{ end }}
    </div>
    {{ end }}
    
    {{ if .Content }}
    <div class="gig-description">
        {{ .Content }}
    </div>
    {{ end }}
</article>
{{ end }}
