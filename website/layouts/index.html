{{ define "main" }}
<section class="home">
    <div class="hero">
        <div class="hero-logo-container">
             <img src="/picture.gif" alt="{{ .Site.Title }} Logo" class="hero-logo">
         </div>
    </div>
    
    <section class="scroll-text-section">
        <div class="scroll-text">
            <h2>
                <!-- Part 1 -->
                <div class="text-part" id="part1">
                    <span class="glitch-text harsh-noise" title="HARSH NOISE">HARSH NOISE</span>
                    <span class="glitch-text caustic hidden" title="CAUSTIC">CAUSTIC</span>
                    <span class="glitch-text hemorrhaging hidden" title="HEMORRHAGING">HEMORRHAGING</span>
                </div>
                
                <!-- Part 2 -->
                <div class="text-part" id="part2">
                    <span class="glitch-text audio-ritual secondary" title="AUDIO RITUAL">AUDIO RITUAL</span>
                    <span class="glitch-text analog-filth secondary hidden" title="ANALOG FILTH">ANALOG FILTH</span>
                </div>
            </h2>
        </div>
    </section>
    
    <!-- Latest Live Performances -->
    <section class="terminal-section terminal-left">
        <div class="terminal-title">LIVE</div>
        <div class="terminal-header">
            <span class="tab"></span><span class="tab"></span><span class="tab"></span><a href="/live/" class="terminal-link-right">view all</a>
        </div>
        {{ $live := where .Site.Pages "Section" "live" }}
        {{ $live := where $live "Kind" "page" }}
        {{ $sortedLive := sort $live "Date" "desc" }}
        {{ $latestLive := first 5 $sortedLive }}
        {{ if $latestLive }}
        <div class="terminal-list">
            {{ range $index, $item := $latestLive }}
            <span class="terminal-item">
                <a href="{{ .Permalink }}" class="terminal-row-link"><span class="tab"></span><span class="tab"></span><span class="w1">{{ .Date | dateFormat "Jan 02" }}{{ $day := .Date.Day }}{{ $spaces := mod (add $day $index) 3 | add 1 }}{{ range seq $spaces }}<span class="tab"></span>{{ end }}&#8669;</span><span class="tab"></span><span class="w2">{{ .Title }}</span><span class="tab"></span><span class="w3">{{ .Params.location }}</span></a>
            </span><br />
            {{ end }}
        </div>
        {{ end }}
    </section>

    <!-- Latest Music -->
    <section class="terminal-section terminal-right">
        <div class="terminal-title terminal-title-right">MUSIC</div>
        <div class="terminal-header terminal-header-right">
            <a href="/music/" class="terminal-link-right">view all</a><span class="tab"></span><span class="tab"></span><span class="tab"></span>
        </div>
        {{ $albums := where .Site.Pages "Section" "music" }}
        {{ $albums := where $albums "Kind" "page" }}
        {{ $sortedAlbums := sort $albums "Date" "desc" }}
        {{ $recentAlbums := first 5 $sortedAlbums }}
        {{ if $recentAlbums }}
        <div class="terminal-list terminal-list-right">
            {{ range $index, $item := $recentAlbums }}
            <span class="terminal-item">
                <a href="{{ .Permalink }}" class="terminal-row-link"><span class="w2">{{ .Title }}</span><span class="tab"></span><span class="tab"></span><span class="w1">&#8668;{{ $day := .Date.Day }}{{ $spaces := mod (add $day $index) 3 | add 1 }}{{ range seq $spaces }}<span class="tab"></span>{{ end }}{{ .Date | dateFormat "02 Jan" }}</span><span class="tab"></span><span class="tab"></span></a>
            </span><br />
            {{ end }}
        </div>
        {{ end }}
    </section>

    <div style="clear: both; margin-bottom: 4rem;"></div>

    <section class="about-preview featured-section">
        <div class="about-content-wrapper">
            <div class="about-image">
                {{ $image := resources.Get "images/about/obscvrat-harsh-noise-experimental.jpg" }}
                {{ $small := $image.Resize "400x q85" }}
                {{ $medium := $image.Resize "800x q85" }}
                {{ $large := $image.Resize "1200x q85" }}
                <img srcset="{{ $small.RelPermalink }} 400w,
                             {{ $medium.RelPermalink }} 800w,
                             {{ $large.RelPermalink }} 1200w"
                     sizes="(max-width: 768px) 100vw, 800px"
                     src="{{ $medium.RelPermalink }}"
                     alt="Obscvrat"
                     loading="lazy">
            </div>
            <div class="about-text">
                <h2>About</h2>
                <p>Harsh noise and experimental sound rooted in putrid underground. Raw electrical pressure channeled into immersive sonic environments where structure collapses and texture becomes narrative.</p>
                <p class="about-tagline">Obscure. Command Voltage. Rat.</p>
                <a href="/about/" class="read-more glitch-link">Enter the void â†’</a>
            </div>
        </div>
    </section>
</section>

<style>
.about-preview {
    max-width: 100%;
    margin-left: 0;
    background: transparent !important;
    padding: 0 !important;
}

.about-content-wrapper {
    display: flex;
    gap: 3rem;
    align-items: flex-start;
    max-width: 1200px;
}

.about-image {
    flex-shrink: 0;
    width: 40%;
    min-width: 300px;
    max-width: 500px;
    position: relative;
    overflow: hidden;
}

.about-image img {
    width: 100%;
    height: auto;
    filter: blur(4px);
    box-shadow: 
        inset 80px 0 60px -30px #000,
        inset -80px 0 60px -30px #000,
        inset 0 60px 60px -30px #000,
        inset 0 -60px 60px -30px #000;
}

.about-text {
    flex: 1;
}

.about-text h2 {
    margin-top: 0;
    margin-bottom: 1.5rem;
    font-family: 'Typo', 'Courier Prime', monospace;
}

.about-tagline {
    font-family: var(--font-display);
    font-size: 0.85rem;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    color: var(--secondary-color);
    margin-top: 1.5rem;
}

@media (max-width: 768px) {
    .about-content-wrapper {
        flex-direction: column;
    }
    
    .about-image {
        width: 100%;
    }
}
</style>

{{ end }}
